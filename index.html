<!DOCTYPE html>
<html lang="ja">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
  <title>Á®ÆÂ≠êÂ≥∂ÊñπË®Ä„Éê„Éñ„É´„ÇØ„Ç§„Ç∫</title>
  <style>
    * {
      box-sizing: border-box;
    }

    body {
      margin: 0;
      padding: 0;
      background: #000 url("bg.png") no-repeat center center fixed;
      background-size: contain;
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100dvh;
      width: 100vw;
      overflow: hidden;
    }

    #game {
      height: 95vh;
      width: min(95vw, calc(95vh * 9 / 16));
      background: rgba(0, 0, 0, 0.4);
      border: 2px solid rgba(255, 255, 255, 0.2);
      border-radius: 20px;
      padding: 3vh 2vh;
      text-align: center;
      display: flex;
      flex-direction: column;
      justify-content: space-between;
      position: relative;
      z-index: 1;
    }

    h1 {
      font-size: clamp(14px, 2.5vh, 22px);
      margin: 0;
      color: #fff;
      text-shadow: 2px 2px 4px #000;
    }

    #status {
      font-size: 1.8vh;
      color: #fff;
      background: rgba(0, 0, 0, 0.6);
      padding: 5px 15px;
      border-radius: 20px;
      align-self: center;
    }

    #word {
      font-size: clamp(18px, 4.5vh, 32px);
      font-weight: bold;
      color: #fff;
      text-shadow: 2px 2px 10px #000;
      margin: 1vh 0;
    }

    .choices {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 2vh;
      width: 100%;
      flex-grow: 1;
      align-content: center;
    }

    .bubble {
      background: rgba(255, 255, 255, 0.95);
      border-radius: 50%;
      aspect-ratio: 1 / 1;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 10%;
      font-size: clamp(10px, 1.8vh, 15px);
      font-weight: bold;
      box-shadow: 0 4px 15px rgba(0, 0, 0, 0.5);
      cursor: pointer;
      color: #222;
      line-height: 1.3;
    }

    .bubble:active {
      transform: scale(0.92);
    }

    .overlay {
      position: fixed;
      inset: 0;
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 20;
    }

    #startScreen {
      background: #000 url("title.png") no-repeat center center;
      background-size: contain;
    }

    #resultScreen {
      background: rgba(0, 0, 0, 0.85);
    }

    .panel {
      background: rgba(255, 255, 255, 0.9);
      padding: 4vh 20px;
      border-radius: 20px;
      width: 80%;
      max-width: 300px;
      text-align: center;
    }

    button {
      padding: 1.5vh 3vh;
      font-size: clamp(16px, 2.8vh, 24px);
      font-weight: bold;
      border: none;
      border-radius: 15px;
      background: #ffaa00;
      color: #fff;
      box-shadow: 0 5px 0 #cc8800;
      cursor: pointer;
    }

    button:active {
      transform: translateY(3px);
      box-shadow: none;
    }
  </style>
</head>

<body>

  <div id="game">
    <h1>ü´ß Á®ÆÂ≠êÂ≥∂ ÊñπË®Ä„ÇØ„Ç§„Ç∫ ü´ß</h1>
    <div id="status"></div>
    <div id="word"></div>
    <div class="choices" id="choices"></div>
  </div>

  <div id="startScreen" class="overlay">
    <div class="panel" style="margin-top: 30vh; background: rgba(255,255,255,0.7);">
      <button onclick="startGame()">„Çπ„Çø„Éº„Éà</button>
    </div>
  </div>

  <div id="resultScreen" class="overlay" style="display:none;">
    <div class="panel">
      <div id="resultMessage" style="font-size: 3.5vh; margin-bottom: 2vh; font-weight:bold;"></div>
      <div id="correctAnswer" style="margin-bottom: 3vh; font-size: 2vh;"></div>
      <button onclick="nextQuiz()">„Å§„Åé„Å∏ ‚ñ∂</button>
    </div>
  </div>

  <script>
    // „ÇØ„Ç§„Ç∫„Éá„Éº„Çø
    const quizData = [
      { word: "„Ç™„Ç∏„Éº", answer: "Â§´„ÄÅ‰∏ª‰∫∫", audio: "01Oji.mp3" },
      { word: "„Éê„Ç≠„Éº", answer: "Â¶ª„ÄÅÂ••„Åï„Çì", audio: "02Baki.mp3" },
      { word: "„ÉØ„Éº", answer: "„ÅÇ„Å™„Åü„ÄÅÂêõ", audio: "03Wa.mp3" },
      { word: "„ÉØ„É≥„Çø„ÉÅ", answer: "„ÅÇ„Å™„ÅüÈÅî", audio: "04Wantachi.mp3" },
      { word: "„Ç™„Ç§(„Éâ„É≥)", answer: "„Çè„Åü„Åó„ÄÅ‰ø∫", audio: "05Oi.mp3" },
      { word: "„Ç™„Ç§„Çø„ÉÅ („Éâ„É≥„Çø„ÉÅ)", answer: "„Çè„Åü„ÅóÈÅî", audio: "06Oitachi.mp3" },
      { word: "„Ç¢„Ç§„Ç∏„Éß„Éº", answer: "ÂÖÑ„Åï„Çì„ÄÅÂÖàËº©(Áî∑)", audio: "07Aijo.mp3" },
      { word: "„Ç¢„Ç§„Éç„Éº", answer: "Âßâ„Åï„Çì„ÄÅÂÖàËº©(Â•≥)", audio: "08Aine.mp3" },
      { word: "„Ç±„Éä„Ç°„Éº", answer: "Ë¶™Êàö", audio: "09Kena.mp3" },
      { word: "„Ç´„É©„Ç§„É¢", answer: "„Åï„Å§„Åæ„ÅÑ„ÇÇ", audio: "10Karaimo.mp3" },
      { word: "„Ç™„Ç™„ÇÆ", answer: "„Çµ„Éà„Ç¶„Ç≠„Éì", audio: "11Ogi.mp3" },
      { word: "„É¢„Éè„Éü", answer: "„Éñ„ÉÄ„Ç§", audio: "12Mohami.mp3" },
      { word: "„Éà„ÉÉ„Éî„Éº", answer: "È£õ„Å≥È≠ö", audio: "13Toppi.mp3" },
      { word: "„Éü„Éä", answer: "Á£Ø„ÅÆÂ∑ª„ÅçË≤ù", audio: "14Mina.mp3" },
      { word: "„Éê„ÉÉ„ÇØ„Éº", answer: "„Éí„Ç≠„Ç¨„Ç®„É´", audio: "15Bakku.mp3" },
      { word: "„Éê„É≥„ÉÑ„Ç±", answer: "Â§ïÊñπ", audio: "16Bantsuke.mp3" },
      { word: "„Éõ„Éä„ÇØ („Éõ„É°„ÇØ)", answer: "Êöë„ÅÑ", audio: "17Honaku.mp3" },
      { word: "„Éí„É§„Ç´", answer: "ÂØí„ÅÑ„ÄÅÂÜ∑„Åü„ÅÑ", audio: "18Hiyaka.mp3" },
      { word: "„Éè„Ç®„É≥„Ç´„Çº", answer: "ÂçóÈ¢®", audio: "19Haenkaze.mp3" },
      { word: "„É°„ÉÉ„Ç´„É™„É¢„Ç¶„Çµ„É≥", answer: "„Åì„Çì„Å´„Å°„Çè", audio: "20Mekkarimosan.mp3" },
      { word: "„Ç™„Ç∏„É£„É™„É¢„Ç¶„Çª", answer: "„ÅÑ„Çâ„Å£„Åó„ÇÉ„ÅÑ„Åæ„Åõ", audio: "21Ojarimose.mp3" },
      { word: "„Éé„ÉÉ„ÉÅ„Éº„É®", answer: "„Åï„Çà„ÅÜ„Å™„Çâ", audio: "22Notchiyo.mp3" },
      { word: "„Ç™„Éº„Ç≠„Éã", answer: "„ÅÇ„Çä„Åå„Å®„ÅÜ", audio: "23Okini.mp3" },
      { word: "„Ç≠„Éê„É´", answer: "È†ëÂºµ„Çã", audio: "24Kibaru.mp3" },
      { word: "„Ç™„É®„Éä„Ç°", answer: "„Åù„ÅÜ„Å†„Å≠", audio: "25Oyona.mp3" },
      { word: "„Ç¢„Éê„É®„Éº", answer: "È©ö„ÅÑ„Åü„Å®„Åç", audio: "26Abayo.mp3" },
      { word: "„Ç™„É®", answer: "„ÅØ„ÅÑ„ÄÅ‰∫ÜËß£", audio: "27Oyo.mp3" },
      { word: "„Éç„ÇÆ„É´", answer: "Âè±„Çã", audio: "28Negiru.mp3" },
      { word: "„Ç¥„Éº„É©„Ç∑„Ç´", answer: "„Åã„Çè„ÅÑ„Åù„ÅÜ", audio: "29Gorashika.mp3" },
      { word: "„Éä„ÉÉ„Ç∑„Çß„Éº", answer: "„Å©„ÅÜ„Åó„Å¶Ôºü", audio: "30Nasshe.mp3" },
      { word: "„Éè„Éê„Ç∑„Ç´", answer: "Á¥†Êó©„ÅÑ", audio: "31Habashika.mp3" },
      { word: "„Çø„Ç§„ÇΩ„Ç´", answer: "„Åç„Å§„ÅÑ„ÄÅÈõ£ÂÑÄ", audio: "32Taisoka.mp3" },
      { word: "„Éä„Ç™„Çπ", answer: "Áâá‰ªò„Åë„Çã", audio: "33Naosu.mp3" },
      { word: "„Ç´„É´„Éº", answer: "ËÉåË≤†„ÅÜ", audio: "34Karu.mp3" },
      { word: "„É†„Ç∏„Éß„Ç´", answer: "„Åã„Çè„ÅÑ„ÅÑ", audio: "35Mujoka.mp3" },
      { word: "„Ç®„Éº„ÇØ„É©„Éº", answer: "ÈÖî„Å£„Å±„Çâ„ÅÑ", audio: "36Ekura.mp3" },
      { word: "„Ç™„É©„Éñ", answer: "Â§ßÂ£∞„ÇíÂá∫„Åô", audio: "37Orabu.mp3" },
      { word: "„ÉÅ„ÉÉ„Éà", answer: "Â∞ë„Åó", audio: "38Chitto.mp3" },
      { word: "„Çø„Ç§„ÉÅ„Çß", answer: "„Åü„Åè„Åï„Çì", audio: "39Taiche.mp3" }
    ];

    const totalQuestions = 10;
    let questions = []; let current = 0; let score = 0;

    function shuffle(a) { return a.sort(() => Math.random() - 0.5); }

    // „Ç∞„É≠„Éº„Éê„É´Â§âÊï∞„ÅßÂÜçÁîü‰∏≠„ÅÆÈü≥Â£∞„ÇíÁÆ°ÁêÜ
    let currentAudio = null;

    function playAudio(src, onEnded) {
      if (currentAudio) {
        currentAudio.pause();
        currentAudio.currentTime = 0;
      }
      currentAudio = new Audio(src);
      currentAudio.play().catch(e => console.log("Audio play error:", e));
      if (onEnded) {
        currentAudio.onended = onEnded;
      }
    }

    // „Çπ„Çø„Éº„Éà„Éú„Çø„É≥Ôºö00start„ÇíÂÜçÁîü ‚Üí ÁµÇ‰∫ÜÂæå„Å´„Ç≤„Éº„É†ÈñãÂßã
    function startGame() {
      playAudio("00start.mp3", () => {
        document.getElementById("startScreen").style.display = "none";
        questions = shuffle([...quizData]).slice(0, totalQuestions);
        current = 0; score = 0;
        loadQuiz();
      });
    }

    // Âá∫È°åÔºö00mondai„ÇíÂÜçÁîü
    function loadQuiz() {
      playAudio("00mondai.mp3");
      const q = questions[current];
      document.getElementById("status").textContent = `Á¨¨ ${current + 1} Âïè / ${totalQuestions} ÔΩú „Çπ„Ç≥„Ç¢Ôºö${score}`;
      document.getElementById("word").textContent = `„Äå${q.word}„Äç„ÅÆÊÑèÂë≥„ÅØÔºü`;

      let choices = shuffle(quizData.map(x => x.answer).filter(a => a !== q.answer)).slice(0, 3);
      choices.push(q.answer);
      choices = shuffle(choices);

      const box = document.getElementById("choices");
      box.innerHTML = "";
      choices.forEach(c => {
        const div = document.createElement("div");
        div.className = "bubble";
        div.textContent = c;
        div.onclick = () => checkAnswer(c);
        box.appendChild(div);
      });
    }

    // Âà§ÂÆöÔºöÊ≠£Ëß£(00seikai‚ÜíÊñπË®Ä) / Â§ñ„Çå(00hazure)
    function checkAnswer(choice) {
      const q = questions[current];
      const isCorrect = choice === q.answer;
      const result = document.getElementById("resultScreen");
      document.getElementById("resultMessage").textContent = isCorrect ? "‚≠ï Ê≠£Ëß£ÔºÅ" : "‚ùå „Åñ„Çì„Å≠„Çì‚Ä¶";
      document.getElementById("correctAnswer").textContent = `Ê≠£Ëß£Ôºö${q.answer}`;
      result.style.display = "flex";

      if (isCorrect) {
        score += 10;
        // Ê≠£Ëß£Èü≥ ‚Üí ÊñπË®ÄÈü≥Â£∞
        playAudio("00seikai.mp3", () => {
          if (q.audio) playAudio(q.audio);
        });
      } else {
        playAudio("00hazure.mp3");
      }
    }

    function nextQuiz() {
      document.getElementById("resultScreen").style.display = "none";
      current++;
      if (current < totalQuestions) loadQuiz();
      else showFinal();
    }

    function showFinal() {
      const result = document.getElementById("resultScreen");
      document.getElementById("resultMessage").textContent = `üéâ ÁµÇ‰∫ÜÔºÅ`;
      document.getElementById("correctAnswer").innerHTML = `„Çπ„Ç≥„Ç¢Ôºö<strong>${score} ÁÇπ</strong>`;
      const btn = result.querySelector("button");
      btn.textContent = "„ÇÇ„ÅÜ‰∏ÄÂ∫¶„ÅÇ„Åù„Å∂";
      btn.onclick = () => location.reload();
      result.style.display = "flex";
    }
  </script>
</body>

</html>